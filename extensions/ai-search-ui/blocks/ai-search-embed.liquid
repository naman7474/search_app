<!-- AI Search App Embed Block -->
<script>
  window.AISearchConfig = {
    shopUrl: {{ shop.secure_url | json }},
    appProxyUrl: "/apps/xpertsearch",
    enabled: {{ block.settings.enable_global_search | default: true | json }},
    searchBarSelector: {{ block.settings.search_selector | default: 'input[type="search"], input[name="q"]' | json }},
    resultsLimit: {{ block.settings.max_results | default: 10 }},
    showSuggestions: {{ block.settings.show_suggestions | default: true | json }}
  };
</script>
<script src="{{ 'main.js' | asset_url }}" defer></script>
<link rel="stylesheet" href="{{ 'main.css' | asset_url }}">

{% schema %}
{
  "name": "AI Search Global",
  "target": "body",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_global_search",
      "label": "Enable AI-powered search",
      "default": true
    },
    {
      "type": "text",
      "id": "search_selector",
      "label": "Search input CSS selector",
      "default": "input[type=\"search\"], input[name=\"q\"]",
      "info": "CSS selector to identify search input fields"
    },
    {
      "type": "range",
      "id": "max_results",
      "label": "Maximum results to display",
      "min": 5,
      "max": 20,
      "step": 1,
      "default": 10
    },
    {
      "type": "checkbox",
      "id": "show_suggestions",
      "label": "Show search suggestions",
      "default": true
    }
  ]
}
{% endschema %} 